"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[17],{1470:(e,n,t)=>{t.d(n,{A:()=>j});var r=t(6540),i=t(4164),o=t(3104),a=t(6347),s=t(205),l=t(7485),d=t(1682),u=t(679);function c(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return c(e).map((({props:{value:e,label:n,attributes:t,default:r}})=>({value:e,label:n,attributes:t,default:r})))}(t);return function(e){const n=(0,d.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function p({value:e,tabValues:n}){return n.some((n=>n.value===e))}function m({queryString:e=!1,groupId:n}){const t=(0,a.W6)(),i=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,l.aZ)(i),(0,r.useCallback)((e=>{if(!i)return;const n=new URLSearchParams(t.location.search);n.set(i,e),t.replace({...t.location,search:n.toString()})}),[i,t])]}function f(e){const{defaultValue:n,queryString:t=!1,groupId:i}=e,o=h(e),[a,l]=(0,r.useState)((()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find((e=>e.default))??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:o}))),[d,c]=m({queryString:t,groupId:i}),[f,v]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,i]=(0,u.Dv)(n);return[t,(0,r.useCallback)((e=>{n&&i.set(e)}),[n,i])]}({groupId:i}),g=(()=>{const e=d??f;return p({value:e,tabValues:o})?e:null})();(0,s.A)((()=>{g&&l(g)}),[g]);return{selectedValue:a,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);l(e),c(e),v(e)}),[c,v,o]),tabValues:o}}var v=t(2303);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=t(4848);function x({className:e,block:n,selectedValue:t,selectValue:r,tabValues:a}){const s=[],{blockElementScrollPositionUntilNextRender:l}=(0,o.a_)(),d=e=>{const n=e.currentTarget,i=s.indexOf(n),o=a[i].value;o!==t&&(l(n),r(o))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=s.indexOf(e.currentTarget)+1;n=s[t]??s[0];break}case"ArrowLeft":{const t=s.indexOf(e.currentTarget)-1;n=s[t]??s[s.length-1];break}}n?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":n},e),children:a.map((({value:e,label:n,attributes:r})=>(0,b.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{s.push(e)},onKeyDown:u,onClick:d,...r,className:(0,i.A)("tabs__item",g.tabItem,r?.className,{"tabs__item--active":t===e}),children:n??e},e)))})}function y({lazy:e,children:n,selectedValue:t}){const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=o.find((e=>e.props.value===t));return e?(0,r.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:o.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==t})))})}function _(e){const n=f(e);return(0,b.jsxs)("div",{className:(0,i.A)("tabs-container",g.tabList),children:[(0,b.jsx)(x,{...n,...e}),(0,b.jsx)(y,{...n,...e})]})}function j(e){const n=(0,v.A)();return(0,b.jsx)(_,{...e,children:c(e.children)},String(n))}},7854:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>c,frontMatter:()=>a,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"developer/general_concepts/modifiers","title":"Modifiers","description":"When building assets or in any batch process without GUI, we don\'t have to undo our edits, and there is no GUI to synch, so the direct API on plugs is fine (see previous page with set_value and connect calls).","source":"@site/docs/developer/general_concepts/modifiers.md","sourceDirName":"developer/general_concepts","slug":"/developer/general_concepts/modifiers","permalink":"/tangerine-docs/developer/general_concepts/modifiers","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Nodes","permalink":"/tangerine-docs/developer/general_concepts/nodes"},"next":{"title":"Assets for Tangerine","permalink":"/tangerine-docs/developer/tangerine_inputs/assets"}}');var i=t(4848),o=t(8453);t(1470),t(9365);const a={sidebar_position:3},s="Modifiers",l={},d=[{value:"Main Modifiers Functions",id:"main-modifiers-functions",level:2},{value:"Voluntarily skipping modifiers",id:"voluntarily-skipping-modifiers",level:2},{value:"Mouse-Interactive Modifiers",id:"mouse-interactive-modifiers",level:2}];function u(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"modifiers",children:"Modifiers"})}),"\n",(0,i.jsx)(n.p,{children:"When building assets or in any batch process without GUI, we don't have to undo our edits, and there is no GUI to synch, so the direct API on plugs is fine (see previous page with set_value and connect calls).\nIn an interactive tool, it's different: we need to ask Tangerine to stop any background process, and we want Tangerine to synch all the GUI once we have finished our edition. That's where the Modifier comes in.\nIn fact, we have used modifiers from the very beginning of this developer guide, see Hello Tangerine."}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["It's important to respect the pythonic ",(0,i.jsx)(n.code,{children:"with"})," statement when using Modifiers (except for ",(0,i.jsx)(n.em,{children:"Mouse-Interactive"})," Modifiers, see at the bottom of this page)"]})}),"\n",(0,i.jsx)(n.h2,{id:"main-modifiers-functions",children:"Main Modifiers Functions"}),"\n",(0,i.jsx)(n.p,{children:"Here are the 3 main functions we commonly use in scripts to edit the shots in an interactive tool:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"modifier.set_plug_value(plug, value)"})," equivalent to ",(0,i.jsx)(n.code,{children:"plug.set_value(value)"})," with a modifier"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"modifier.connect_plug(plug_from, plug_to)"})," equivalent to ",(0,i.jsx)(n.code,{children:"plug_from.connect(plug_to)"})," with a modifier"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"node = modifier.create_node(node_class, parent_node, node_name)"})," equivalent to ",(0,i.jsx)(n.code,{children:"node = node_class(parent_node, node_name)"})," with a modifier"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Please see in the API Reference for details, but they are very straightforward! Here is the very first example of the previous page (Nodes) rewritten with a modifier. Note you can now press Ctrl+Z and Ctrl+Y (after you copy/pasted this script in the Command Line window) to Undo and Redo (Open the Node Tree to see the nodes disappear on Undo and reappear on Redo)."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from meta_nodal_py import Add\n\nr = document.root()\n\nwith document.modify(\"example\") as modifier:\n    A = modifier.create_node(Add, r, 'A')\n    B = modifier.create_node(Add, r, 'B')\n\n    modifier.set_plug_value(A.input1, 1.0)\n    modifier.set_plug_value(A.input2, 2.0)\n\n    print(A.output.get_value())  # prints 3.0\n\n    modifier.connect_plugs(B.input1, A.output)\n    modifier.set_plug_value(B.input2, -3.0)\n\n    print(B.output.get_value())  # prints 0.0\n"})}),"\n",(0,i.jsxs)(n.p,{children:["When editing a value with an animation connected in, it may be tricky to add a key, especially if there is an animation Layer under the hood. This is why we provide this handy helper: ",(0,i.jsx)(n.code,{children:"set_animated_plug_value"})," (see Hello Tangerine for a sample usage)."]}),"\n",(0,i.jsx)(n.p,{children:"Finally, there are many other functions on modifiers (to remove nodes, and much more... see the API Reference for details)."}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The only plugs of the Document that do not need a modifier are ",(0,i.jsx)(n.code,{children:"start_frame"})," and ",(0,i.jsx)(n.code,{children:"end_frame"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Tangerine modifiers are ",(0,i.jsx)(n.strong,{children:"not"})," related to ",(0,i.jsx)(n.a,{href:"https://citrus-software.github.io/mikan-docs/usage/modifiers",children:"Mikan modifiers"})," which serve a different purpose."]}),"\n"]})}),"\n",(0,i.jsx)(n.h2,{id:"voluntarily-skipping-modifiers",children:"Voluntarily skipping modifiers"}),"\n",(0,i.jsx)(n.p,{children:"In rare occasions, you want to make some changes without using a modifier. In this cas, follow this pattern:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["first synch everything to ensure no background engine is running: ",(0,i.jsx)(n.code,{children:"document.synch_compute_all_frames()"})]}),"\n",(0,i.jsx)(n.li,{children:"make yout edits"}),"\n",(0,i.jsxs)(n.li,{children:["finally, call ",(0,i.jsx)(n.code,{children:"document.rig_has_changed_without_modifiers()"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"mouse-interactive-modifiers",children:"Mouse-Interactive Modifiers"}),"\n",(0,i.jsx)(n.p,{children:'Modifiers are useful in interactive GUI mode, but they may require a real mouse interaction before they finish.\nIn all previous examples, we have seen one-shot modifiers: there were no user interaction between the time they start and the time they end.\nHere is how to have "interactive" modifiers:'}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:['in your "on mouse pressed" callback, call ',(0,i.jsx)(n.code,{children:'modifier = document.begin_interact("my interactive modifier")'})]}),"\n",(0,i.jsx)(n.li,{children:'then in your "on mouse move" callback, call:'}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"modifier.start_group()\nmodifier.set_plug_value(plug, value)\nmodifier.set_plug_value(another_plug, another_value)\nmodifier.end_group()\ndocument.interact_modify()  # update the GUI while interacting\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:['finally, in your "on mouse release" callback, call ',(0,i.jsx)(n.code,{children:"document.end_modify_interactive()"})]}),"\n"]})]})}function c(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>s});var r=t(6540);const i={},o=r.createContext(i);function a(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(o.Provider,{value:n},e.children)}},9365:(e,n,t)=>{t.d(n,{A:()=>a});t(6540);var r=t(4164);const i={tabItem:"tabItem_Ymn6"};var o=t(4848);function a({children:e,hidden:n,className:t}){return(0,o.jsx)("div",{role:"tabpanel",className:(0,r.A)(i.tabItem,t),hidden:n,children:e})}}}]);